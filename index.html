<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Персональный ИИ</title>
<style>
body {
  margin:0;
  font-family:-apple-system, system-ui, Arial;
  background:#0b0d12;
  color:#e9eefc;
}
.wrap {
  max-width:800px;
  margin:0 auto;
  padding:16px;
}
h1 { margin:0 0 10px; }
.chat {
  background:#111626;
  border-radius:14px;
  padding:12px;
  height:55vh;
  overflow-y:auto;
  border:1px solid rgba(255,255,255,.08);
}
.msg {
  margin:8px 0;
  padding:8px 12px;
  border-radius:12px;
  max-width:85%;
}
.me {
  background:#2a6bff;
  margin-left:auto;
}
.ai {
  background:#1c2238;
}
.controls {
  display:flex;
  gap:8px;
  margin-top:10px;
}
input {
  flex:1;
  padding:12px;
  border-radius:10px;
  border:none;
  outline:none;
}
button {
  padding:12px 14px;
  border-radius:10px;
  border:none;
  background:#2a6bff;
  color:#fff;
  font-weight:700;
}
.progressBox {
  margin:12px 0;
}
.bar {
  height:10px;
  background:#222;
  border-radius:6px;
  overflow:hidden;
}
.bar > div {
  height:100%;
  background:#2a6bff;
  width:0%;
}
.meta {
  font-size:13px;
  opacity:.8;
  margin-top:6px;
}
</style>
</head>
<body>

<div class="wrap">
  <h1>Персональный ИИ</h1>

  <div class="progressBox">
    <div>Уровень интеллекта: <b id="lvl">0%</b></div>
    <div class="bar"><div id="bar"></div></div>
    <div class="meta" id="stats">Память пуста</div>
  </div>

  <div class="chat" id="chat"></div>

  <div class="controls">
    <input id="input" placeholder="Напиши что-нибудь…" />
    <button id="send">▶</button>
  </div>
</div>

<script>
const chat = document.getElementById('chat');
const input = document.getElementById('input');
const send = document.getElementById('send');
const bar = document.getElementById('bar');
const lvl = document.getElementById('lvl');
const stats = document.getElementById('stats');

// ПАМЯТЬ ИИ
let memory = JSON.parse(localStorage.getItem('ai_memory') || '[]');

// Добавить сообщение
function addMsg(text, cls){
  const div = document.createElement('div');
  div.className = 'msg ' + cls;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

// Прогресс = количество знаний (простая метрика)
function updateProgress(){
  const max = 50; // условный "умный"
  const value = Math.min(memory.length, max);
  const percent = Math.round((value / max) * 100);
  bar.style.width = percent + '%';
  lvl.textContent = percent + '%';
  stats.textContent = `Фактов в памяти: ${memory.length}`;
}

// Ответ ИИ
function aiReply(text){
  // если учим
  if(text.toLowerCase().startsWith('запомни')){
    const fact = text.slice(8).trim();
    if(fact){
      memory.push(fact);
      localStorage.setItem('ai_memory', JSON.stringify(memory));
      updateProgress();
      return 'Я запомнил это.';
    }
  }

  // если объяснение
  if(text.toLowerCase().includes('это значит')){
    memory.push(text);
    localStorage.setItem('ai_memory', JSON.stringify(memory));
    updateProgress();
    return 'Принял. Это стало частью моего понимания.';
  }

  // попытка понять через память
  for(const m of memory){
    if(text.toLowerCase().includes(m.split(' ')[0])){
      return 'Я думаю, это связано с тем, что ты раньше мне объяснял.';
    }
  }

  return 'Я пока не уверен. Можешь объяснить или сказать «запомни …»';
}

// Отправка
send.onclick = () => {
  const text = input.value.trim();
  if(!text) return;
  input.value = '';
  addMsg(text, 'me');
  setTimeout(() => {
    const reply = aiReply(text);
    addMsg(reply, 'ai');
  }, 300);
};

input.addEventListener('keydown', e => {
  if(e.key === 'Enter') send.onclick();
});

// init
addMsg('Я готов учиться. Расскажи мне что-нибудь.', 'ai');
updateProgress();
</script>

</body>
</html>
